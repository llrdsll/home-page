<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Loja de Ferragens — Demo</title>
<style>
  :root{
    --orange:#F97316;
    --bg:#f7fafc;
    --card:#ffffff;
    --muted:#6b7280;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:#111827;line-height:1.45;-webkit-font-smoothing:antialiased}
  .container{max-width:1100px;margin:0 auto;padding:20px}
  header{background:#fff;display:flex;align-items:center;justify-content:space-between;padding:14px 20px;box-shadow:0 2px 8px rgba(0,0,0,0.06);position:sticky;top:0;z-index:60}
  .brand{display:flex;align-items:center;gap:12px;text-decoration:none;color:inherit;cursor:pointer}
  .logo{width:44px;height:44px;border-radius:50%;background:var(--orange);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
  .brand-block{display:flex;flex-direction:column}
  .brand-block .title{font-weight:700}
  .brand-block .subtitle{font-size:12px;color:var(--muted);overflow:hidden;white-space:nowrap}
  nav{display:flex;align-items:center;gap:14px}
  nav a{text-decoration:none;color:inherit;font-weight:600;cursor:pointer;padding:6px 8px;border-radius:8px}
  nav a.active{color:var(--orange);background:rgba(249,115,22,0.06)}
  main{padding:20px 0 120px}
  .hero{background:linear-gradient(180deg,#fffaf0,#fff);border-radius:12px;padding:36px;text-align:center;display:flex;flex-direction:column;align-items:center;gap:12px}
  .hero img{width:120px;height:120px;border-radius:50%;object-fit:cover;border:4px solid #fff;box-shadow:0 6px 18px rgba(0,0,0,0.08)}
  .cta-group{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap;justify-content:center}
  .btn{padding:10px 16px;border-radius:12px;border:1px solid transparent;cursor:pointer;font-weight:600}
  .btn-primary{background:var(--orange);color:#fff}
  .btn-outline{background:#fff;border:1px solid var(--orange);color:var(--orange)}
  .small{font-size:13px;color:var(--muted)}
  .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:16px}
  .card{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 6px 14px rgba(2,6,23,0.03);display:flex;flex-direction:column}
  .card img{width:100%;height:160px;object-fit:cover;border-radius:8px}
  .card .price{color:var(--orange);font-weight:700;margin-top:8px}
  .card .actions{margin-top:auto;display:flex;gap:8px}
  .faq-item{border-bottom:1px solid #efefef;padding:10px 0;display:flex;flex-direction:column}
  .faq-q{display:flex;justify-content:space-between;align-items:center;cursor:pointer;font-weight:600}
  .faq-a{margin-top:8px;color:var(--muted);display:none}
  .faq-a.open{display:block}
  .cart-btn{position:fixed;right:18px;bottom:18px;background:#fff;border-radius:28px;padding:10px 14px;box-shadow:0 10px 30px rgba(2,6,23,0.12);display:flex;align-items:center;gap:10px;z-index:80;cursor:pointer}
  .cart-badge{background:var(--orange);color:#fff;border-radius:999px;padding:4px 8px;font-size:13px}
  .cart-panel{position:fixed;right:18px;bottom:76px;width:380px;max-width:94vw;background:#fff;border-radius:12px;padding:14px;box-shadow:0 18px 40px rgba(2,6,23,0.18);z-index:80}
  .cart-item{display:flex;gap:10px;align-items:center;padding:8px 0;border-bottom:1px dashed #f1f1f1}
  .cart-item img{width:56px;height:56px;object-fit:cover;border-radius:8px}
  .cart-actions{display:flex;gap:8px;margin-top:12px}
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:flex;align-items:center;justify-content:center;z-index:90}
  .modal{background:#fff;padding:18px;border-radius:12px;max-width:820px;width:94%;display:flex;gap:18px}
  .modal img{width:260px;height:260px;object-fit:cover;border-radius:10px}
  input[type="number"]{width:78px;padding:8px;border-radius:8px;border:1px solid #e6e6e6}
  select, input[type="file"], input[type="text"], textarea{padding:8px;border-radius:8px;border:1px solid #e6e6e6}
  footer{text-align:center;padding:20px;color:var(--muted);font-size:14px}
  .marquee{overflow:hidden;white-space:nowrap;display:inline-block}
  .marquee span{display:inline-block;padding-left:100%;animation:marq 12s linear infinite}
  @keyframes marq{0%{transform:translateX(0)}100%{transform:translateX(-100%)}}
  .qty-control{display:flex;align-items:center;gap:8px;margin-top:6px}
  .qty-btn{background:var(--orange);color:#fff;border:none;border-radius:8px;width:34px;height:34px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;font-weight:700;box-shadow:0 6px 14px rgba(249,115,22,0.12);transition:transform .12s}
  .qty-btn:active{transform:scale(.96)}
  .qty-number{min-width:36px;text-align:center;font-weight:700;padding:6px 10px;border-radius:8px;background:#f3f4f6}
  .remove-ghost{background:transparent;border:none;color:#ef4444;cursor:pointer;padding:6px 8px;border-radius:8px;font-weight:600}

  /* mobile nav / hamburger */
  .hamburger{display:none;flex-direction:column;gap:5px;cursor:pointer;padding:8px;border-radius:8px}
  .hamburger span{width:26px;height:3px;background:var(--orange);border-radius:2px;transition:.3s}
  .hamburger.active span:nth-child(1){transform:translateY(8px) rotate(45deg)}
  .hamburger.active span:nth-child(2){opacity:0}
  .hamburger.active span:nth-child(3){transform:translateY(-8px) rotate(-45deg)}
  .mobile-nav{display:none;flex-direction:column;background:#fff;position:fixed;top:68px;left:10px;right:10px;padding:12px 16px;box-shadow:0 6px 18px rgba(0,0,0,0.08);z-index:70;border-radius:12px}
  .mobile-nav a{padding:12px 8px;border-bottom:1px solid #f3f4f6;text-decoration:none;color:#111827;font-weight:700}
  .mobile-nav a:last-child{border-bottom:none}
  .mobile-nav.open{display:flex}

  /* responsive grid */
  @media (max-width:900px){.grid{grid-template-columns:repeat(2,1fr)}}
  @media (max-width:620px){
    .grid{grid-template-columns:1fr}
    header{padding:12px}
    .hero img{width:96px;height:96px}
    .modal{flex-direction:column;align-items:center}
    .cart-panel{right:12px;left:12px;width:auto}
  }
  @media (max-width:768px){
    nav{display:none}
    .hamburger{display:flex}
  }

  /* small helpers */
  .muted{color:var(--muted)}
  .row{display:flex;gap:12px;align-items:center}
  .space{flex:1}
  .center{text-align:center}
</style>
</head>
<body>

<header>
  <div class="container" style="display:flex;align-items:center;justify-content:space-between;padding:0">
    <div style="display:flex;align-items:center;gap:12px">
      <div class="brand" id="home-link" title="Home">
        <img id="logo-img" src="logo.jpeg" alt="logo" style="width:44px;height:44px;border-radius:50%;object-fit:cover;display:block"
             onerror="this.style.display='none';document.querySelector('.logo').style.display='flex'">
        <div class="logo" style="display:none">A</div>
        <div class="brand-block">
          <div class="title">JFG Metais </div>
          <div class="subtitle"><span class="marquee"><span>Aqui Temos • Suportes de Fixação • Direto da Fábrica</span></span></div>
        </div>
      </div>
    </div>

    <nav id="desktopNav">
      <a href="#/" class="nav-link" data-route="/">Home</a>
      <a href="#/loja" class="nav-link" data-route="/loja">Loja</a>
      <a href="#/blog" class="nav-link" data-route="/blog">Blog</a>
      <a href="#/sobre" class="nav-link" data-route="/sobre">Sobre</a>
      <a href="#/trabalhe" class="nav-link" data-route="/trabalhe">Trabalhe conosco</a>
    </nav>

    <div style="display:flex;align-items:center;gap:10px">
      <div class="hamburger" id="hamburger" aria-label="Abrir menu">
        <span></span><span></span><span></span>
      </div>
    </div>
  </div>

  <div class="mobile-nav" id="mobileNav" aria-hidden="true">
    <a href="#/" class="nav-link" data-route="/">Home</a>
    <a href="#/loja" class="nav-link" data-route="/loja">Loja</a>
    <a href="#/blog" class="nav-link" data-route="/blog">Blog</a>
    <a href="#/sobre" class="nav-link" data-route="/sobre">Sobre</a>
    <a href="#/trabalhe" class="nav-link" data-route="/trabalhe">Trabalhe conosco</a>
  </div>
</header>

<main class="container" id="app"></main>

<button id="cart-btn" class="cart-btn" aria-label="Abrir carrinho" title="Abrir carrinho">
  <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M3 3h2l.4 2M7 13h10l4-8H5.4" stroke="#111827" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
  <div style="text-align:left">
    <div style="font-weight:700">Carrinho</div>
    <div class="small" id="cart-summary">0 itens — R$ 0,00</div>
  </div>
  <div class="cart-badge" id="cart-count">0</div>
</button>

<div id="overlays"></div>

<footer>© <span id="year"></span> JFG — criado com carinho por @andre</footer>

<!-- Optional EmailJS (kept, but disabled by default) -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>
/* =========================
   CONFIGURAÇÕES E DADOS
   ========================= */
const PHONE_RAW = '11974177315'; // seu número (sem +). Já existente no seu código.
const WA_NUMBER = (function(){ const d = String(PHONE_RAW).replace(/\D/g,''); return d.startsWith('55') ? d : '55'+d; })();

const EMAILJS_ENABLED = false;
const EMAILJS_SERVICE_ID = 'YOUR_EMAILJS_SERVICE_ID';
const EMAILJS_TEMPLATE_ID = 'YOUR_EMAILJS_TEMPLATE_ID';
const EMAILJS_PUBLIC_KEY = 'YOUR_EMAILJS_PUBLIC_KEY';

const LOCAL_PRODUCT_IMAGES = {
  'a1': '1.png','b1': '2.png','c1': '3.png','d1':'4.png','e1':'5.png','ff1':'6.png',
  'g1':'7.png','h1':'8.png','i1':'9.png','j1':'10.png','k1':'11.png','l1':'12.png',
  'm1':'13.png','n1':'14.png','o1':'15.png','p1':'16.png','q1':'17.png','r1':'18.png',
  's1':'19.png','t1':'20.png','u1':'21.png','v1':'22.png','w1':'23.png','x1':'24.png',
  'y1':'25.png','z1':'26.png','a2':'27.png','b2':'28.png','c2':'29.png','d2':'30.png'
};

/* =========================
   Produtos (exemplo estendido)
   ========================= */
   
const products = [
  {
    id: 'a1',
    title: 'Mão Francesa Normal 20x40',
    img: LOCAL_PRODUCT_IMAGES['a1'] || 'https://source.unsplash.com/800x600/?bracket,shelf',
    sizes: [
      { name: '10cm', price: 13.11 },
      { name: '15cm', price: 13.64 },
      { name: '20cm', price: 14.39 },
      { name: '25cm', price: 14.95 },
      { name: '30cm', price: 15.51 },
      { name: '35cm', price: 16.07 },
      { name: '40cm', price: 16.65 },
      { name: '45cm', price: 17.18 },
      { name: '50cm', price: 17.77 },
      { name: '55cm', price: 18.33 },
      { name: '60cm', price: 18.97 },
      { name: '65cm', price: 19.60 },
      { name: '70cm', price: 20.23 },
      { name: '80cm', price: 21.60 },
      { name: '90cm', price: 22.87 }                  
    ]
  },
  {
    id: 'j1',
    title: 'Bucha Fischer SX',
    img: LOCAL_PRODUCT_IMAGES['j1'] || 'https://source.unsplash.com/800x600/?screw,bolt',
    sizes: [
      { name: '10mm', price: 0.94 },
      { name: '8mm', price: 0.59 }
    ]
  },
  {
    id: 'h1',
    title: 'Parafuso Sextavado',
    img: LOCAL_PRODUCT_IMAGES['h1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '1/4x50', price: 0.70 },
      { name: '1/4x60', price: 0.59 },
      { name: '1/4x65', price: 0.62 },
      { name: '1/4x70', price: 0.65 },
      { name: '1/4x75', price: 0.68 },
      { name: '5/16x50', price: 0.84 },
      { name: '5/16x55', price: 0.85 },
      { name: '5/16x60', price: 0.90 },
      { name: '5/16x70', price: 1.07 },
      { name: '5/16x75', price: 1.10 },
      { name: '5/16x80', price: 1.15 },
      { name: '5/16x90', price: 1.45 }
    ]
  },
  {
    id: 'd1',
    title: 'MF Cantoneira 1.1/4 x 1/8 (Média)',
    img: LOCAL_PRODUCT_IMAGES['d1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '14cm', price: 16.25 },
      { name: '16cm', price: 16.56 },
      { name: '25cm', price: 19.81 },
      { name: '30cm', price: 20.97 },
      { name: '35cm', price: 21.62 },
      { name: '40cm', price: 22.49 },
      { name: '45cm', price: 23.15 },
      { name: '50cm', price: 24.01 },
      { name: '55cm', price: 24.77 },
      { name: '60cm', price: 25.53 },
      { name: '65cm', price: 26.29 },
      { name: '70cm', price: 27.06 }
    ]
  },
  {
    id: 'd1',
    title: 'MF Cantoneira 1.1/2 x 1/8 (Média)',
    img: LOCAL_PRODUCT_IMAGES['d1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '14cm', price: 17.20 },
      { name: '16cm', price: 17.58 },
      { name: '30cm', price: 23.14 },
      { name: '35cm', price: 24.10 },
      { name: '38cm', price: 24.48 },
      { name: '40cm', price: 25.06 },
      { name: '45cm', price: 26.01 },
      { name: '50cm', price: 26.97 },
      { name: '55cm', price: 27.93 },
      { name: '60cm', price: 28.89 },
      { name: '65cm', price: 29.85 },
      { name: '70cm', price: 30.80 },
      { name: '80cm', price: 34.64 },
      { name: '90cm', price: 36.55 },
      { name: '100cm', price: 28.47 }
    ]
  },
  {
    id: 'z1',
    title: 'Grapa Tubo 1.1/4 (Leve)',
    img: LOCAL_PRODUCT_IMAGES['z1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '32cm', price: 12.96 },
      { name: '42cm', price: 13.99 },
      { name: '50cm', price: 14.81 },
      { name: '52cm', price: 15.02 },
      { name: '55cm', price: 15.33 },
      { name: '58cm', price: 15.64 },
      { name: '60cm', price: 15.84 },
      { name: '70cm', price: 16.88 },
      { name: '80cm', price: 17.91 }
    ]
  },
  {
    id: 'z1',
    title: 'Grapa Tubo 32mm (Pesada)',
    img: LOCAL_PRODUCT_IMAGES['z1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '50cm', price: 18.85 },
      { name: '52cm', price: 19.18 },
      { name: '55cm', price: 19.67 },
      { name: '58cm', price: 20.15 },
      { name: '60cm', price: 20.48 },
      { name: '66cm', price: 21.46 },
      { name: '70cm', price: 22.11 },
      { name: '80cm', price: 23.74 }
    ]
  },
  {
    id: 'z1',
    title: 'Grapa Tubo 38mm (Pesada)',
    img: LOCAL_PRODUCT_IMAGES['z1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '50cm', price: 49.13 },
      { name: '52cm', price: 50.13 },
      { name: '55cm', price: 51.63 },
      { name: '58cm', price: 53.13 },
      { name: '60cm', price: 53.92 },
      { name: '66cm', price: 57.12 },
      { name: '70cm', price: 57.86 },
      { name: '80cm', price: 64.12 }
    ]
  },
  {
    id: 'e1',
    title: 'Massa Plástica 800g',
    img: LOCAL_PRODUCT_IMAGES['e1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: 'Branca', price: 13.00 },
      { name: 'Chumbar', price: 13.00 },
      { name: 'Preta', price: 13.00 },
      { name: 'Travertino', price: 13.00 },
      { name: 'Verde', price: 13.00 }
    ]
  },
  {
    id: 'g1',
    title: 'Cola P.U',
    img: LOCAL_PRODUCT_IMAGES['g1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: 'Branco', price: 15.99 },
      { name: 'Preto', price: 15.99 }
    ]
  },
  {
    id: 'i1',
    title: 'Bucha Duo Power',
    img: LOCAL_PRODUCT_IMAGES['i1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '10mm', price: 1.29 }
    ]
  },
  {
    id: 'k1',
    title: 'IV PLAST TJ Baiano',
    img: LOCAL_PRODUCT_IMAGES['k1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '10mm', price: 0.30 }
    ]
  },
  {
    id: 'a2',
    title: 'Suporte Varal de Teto',
    img: LOCAL_PRODUCT_IMAGES['a2'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: 'Regulagem', price: 25.03 }
    ]
  },
  {
    id: 'b2',
    title: 'Cavalete de Regulagem ',
    img: LOCAL_PRODUCT_IMAGES['b2'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: 'Tubo', price: 420.00 }
    ]
  },
  {
    id: 'c2',
    title: 'Cavalete de Abrir e Fechar',
    img: LOCAL_PRODUCT_IMAGES['c2'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: 'Tubo', price: 168.00 }
    ]
  },
  {
    id: 'd2',
    title: 'Cavalete de Cantoneira ',
    img: LOCAL_PRODUCT_IMAGES['d2'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: 'Cantoneira', price: 330.00 }
    ]
  },
  {
    id: 'n1',
    title: 'Bucha IV Plast',
    img: LOCAL_PRODUCT_IMAGES['n1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '8mm', price: 0.10 },
      { name: '10mm', price: 0.20 },
      { name: '12mm', price: 0.26 }
    ]
  },
  {
    id: 'l1',
    title: 'Bucha New Fix Plast',
    img: LOCAL_PRODUCT_IMAGES['l1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '10mm', price: 0.30 }
    ]
  },
  {
    id: 'm1',
    title: 'Bucha Fischer UX',
    img: LOCAL_PRODUCT_IMAGES['m1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '10mm', price: 0.73 }
    ]
  },
  {
    id: 'o1',
    title: 'Bucha Argevision',
    img: LOCAL_PRODUCT_IMAGES['o1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '10mm', price: 1.29 }
    ]
  },
  {
    id: 'p1',
    title: 'Bucha MX Nylon 10',
    img: LOCAL_PRODUCT_IMAGES['p1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '10mm', price: 1.29 }
    ]
  },
  {
    id: 'q1',
    title: 'Chumbador Parabolt',
    img: LOCAL_PRODUCT_IMAGES['q1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '1/4x2', price: 1.59 },
      { name: '5/16x2.1/4', price: 2.22 }
    ]
  },
  {
    id: 'r1',
    title: 'Chumbador Ancora',
    img: LOCAL_PRODUCT_IMAGES['r1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '1/4x2', price: 1.89 },
      { name: '1/4x3', price: 2.22 }
    ]
  },
  {
    id: 's1',
    title: 'Kit Drywall',
    img: LOCAL_PRODUCT_IMAGES['s1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '1/4', price: 5.03 },
      { name: '3/16', price: 4.98 }
    ]
  },
  {
    id: 't1',
    title: 'Bucha MU 10',
    img: LOCAL_PRODUCT_IMAGES['t1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '10mm', price: 1.29 }
    ]
  },
  {
    id: 'u1',
    title: 'Cantoneiras 38m',
    img: LOCAL_PRODUCT_IMAGES['u1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '05cm', price: 16.25 },
      { name: '10cm', price: 16.56 },
      { name: '15cm', price: 19.81 },
      { name: '20cm', price: 20.97 },
      { name: '25cm', price: 21.62 },
      { name: '30cm', price: 22.49 },
      { name: '35cm', price: 23.15 },
      { name: '40cm', price: 24.01 },
      { name: '45cm', price: 24.77 },
      { name: '50cm', price: 25.53 },
      { name: '55cm', price: 26.29 },
      { name: '60cm', price: 27.06 },
      { name: '65cm', price: 25.53 },
      { name: '70cm', price: 26.29 }
    ]
  },
  {
    id: 'u1',
    title: 'Cantoneira 32mm',
    img: LOCAL_PRODUCT_IMAGES['u1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '10cm', price: 6.77 },
      { name: '20cm', price: 8.29 },
      { name: '25cm', price: 9.05 },
      { name: '30cm', price: 9.81 },
      { name: '40cm', price: 11.34 },
      { name: '45cm', price: 12.46 },
      { name: '50cm', price: 12.86 },
      { name: '60cm', price: 14.38 }
    ]
  },
  {
    id: 'v1',
    title: 'MF. Ferro Chato 5/16 x 1.1/4 (Grosso)',
    img: LOCAL_PRODUCT_IMAGES['v1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '45cm', price: 24.43 },
      { name: '50cm', price: 25.44 },
      { name: '55cm', price: 26.45 },
      { name: '60cm', price: 27.46 }
    ]
  },
  {
    id: 'v1',
    title: 'MF. Ferro Chato 3x16 x 1.1/4 (Médio)',
    img: LOCAL_PRODUCT_IMAGES['v1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '40cm', price: 21.79 },
      { name: '45cm', price: 22.65 },
      { name: '50cm', price: 23.52 },
      { name: '55cm', price: 24.39 }
    ]
  },
  {
    id: 'v1',
    title: 'MF. Ferro Chato 1/8 x 1.1/4 (Fino)',
    img: LOCAL_PRODUCT_IMAGES['v1'] || 'https://source.unsplash.com/800x600/?easel,stand',
    sizes: [
      { name: '40cm', price: 19.29 },
      { name: '45cm', price: 20.00 },
      { name: '50cm', price: 20.62 },
      { name: '55cm', price: 21.83 }
    ]
  },
  {
    id: 'b1',
    title: ' ̶G̶r̶a̶p̶a̶s̶ ̶P̶e̶r̶f̶i̶l̶ ̶T̶ (esgotado)',
    img: LOCAL_PRODUCT_IMAGES['b1'] || 'https://source.unsplash.com/800x600/?product,tool',
    sizes: [
      { name: '05cm', price: 0.00 },
      { name: '10cm', price: 0.00 },
      { name: '15cm', price: 0.00 },
      { name: '20cm', price: 0.00 },
      { name: '30cm', price: 0.00 },
      { name: '35cm', price: 0.00 },
      { name: '40cm', price: 0.00 },
      { name: '45cm', price: 0.00 },
      { name: '50cm', price: 0.00 },
      { name: '55cm', price: 0.00 },
      { name: '60cm', price: 0.00 },
      { name: '65cm', price: 0.00 },
      { name: '70cm', price: 0.00 },
      { name: '75cm', price: 0.00 },
      { name: '1,20m', price: 0.00 },
      { name: '3m', price: 0.00 }
    ]
  },
  {
    id: 'w1',
    title: ' ̶M̶F̶.̶ ̶P̶e̶r̶f̶i̶l̶ ̶T̶ ̶1̶.̶1̶/̶4̶ ̶(̶M̶é̶d̶i̶o̶)̶ (esgotado)',
    img: LOCAL_PRODUCT_IMAGES['w1'] || 'https://source.unsplash.com/800x600/?product,tool',
    sizes: [
      { name: '20cm', price: 0.00 },
      { name: '25cm', price: 0.00 },
      { name: '30cm', price: 0.00 },
      { name: '35cm', price: 0.00 },
      { name: '40cm', price: 0.00 },
      { name: '45cm', price: 0.00 },
      { name: '50cm', price: 0.00 },
      { name: '55cm', price: 0.00 },
      { name: '60cm', price: 0.00 },
      { name: '65cm', price: 0.00 },
      { name: '70cm', price: 0.00 },
      { name: '75cm', price: 0.00 }
    ]
  },
  {
    id: 'g1',
    title: 'Viga U para divisórias 28x28x28mm',
    img: LOCAL_PRODUCT_IMAGES['g1'] || 'https://source.unsplash.com/800x600/?product,tool',
    sizes: [
      { name: '10cm', price: 10.58 },
      { name: '20cm', price: 12.24 },
      { name: '30cm', price: 13.89 },
      { name: '40cm', price: 18.17 },
      { name: '50cm', price: 34.29 },
      { name: '60cm', price: 39.26 },
      { name: '70cm', price: 45.80 },
      { name: '80cm', price: 50.77 },
      { name: '90cm', price: 55.74 },
      { name: '100cm', price: 62.28 }
    ]
  },
  {
    id: 'x1',
    title: 'Grapa Quadrada 20x20 (Leve)',
    img: LOCAL_PRODUCT_IMAGES['x1'] || 'https://source.unsplash.com/800x600/?product,tool',
    sizes: [
      { name: '25cm', price: 13.77 },
      { name: '30cm', price: 14.16 },
      { name: '35cm', price: 14.41 },
      { name: '40cm', price: 14.95 },
      { name: '45cm', price: 15.24 },
      { name: '50cm', price: 15.63 },
      { name: '55cm', price: 16.92 },
      { name: '60cm', price: 16.41 },
      { name: '65cm', price: 18.96 },
      { name: '70cm', price: 19.64 },
      { name: '80cm', price: 20.72 }
    ]
  },
  {
    id: 'x1',
    title: 'Grapa Quadrada 50x30 (Pesada)',
    img: LOCAL_PRODUCT_IMAGES['x1'] || 'https://source.unsplash.com/800x600/?product,tool',
    sizes: [
      { name: '60cm', price: 26.64 },
      { name: '65cm', price: 28.01 },
      { name: '70cm', price: 29.38 },
      { name: '75cm', price: 30.75 },
      { name: '80cm', price: 32.11 },
      { name: '85cm', price: 34.93 },
      { name: '90cm', price: 36.24 },
      { name: '95cm', price: 37.74 }
    ]
  },
  {
    id: 'x1',
    title: 'Grapa Quadrada 40x40 (Pesada)',
    img: LOCAL_PRODUCT_IMAGES['x1'] || 'https://source.unsplash.com/800x600/?product,tool',
    sizes: [
      { name: '60cm', price: 27.64 },
      { name: '65cm', price: 29.05 },
      { name: '70cm', price: 29.33 },
      { name: '75cm', price: 30.46 },
      { name: '80cm', price: 31.87 },
      { name: '85cm', price: 33.29 },
      { name: '90cm', price: 35.62 },
      { name: '95cm', price: 37.03 }
    ]
  },
  {
    id: 'g1',
    title: ' ̶M̶F̶.̶ ̶P̶e̶r̶f̶i̶l̶ ̶T̶ ̶1̶.̶1̶/̶2̶ ̶(̶G̶r̶o̶s̶s̶o̶)̶ (esgotado)',
    img: LOCAL_PRODUCT_IMAGES['g1'] || 'https://source.unsplash.com/800x600/?product,tool',
    sizes: [
      { name: '40cm', price: 0.00 },
      { name: '45cm', price: 0.00 },
      { name: '50cm', price: 0.00 },
      { name: '55cm', price: 0.00 },
      { name: '60cm', price: 0.00 },
      { name: '65cm', price: 0.00 },
      { name: '70cm', price: 0.00 },
      { name: '75cm', price: 0.00 }
    ]
  },
  {
  id: 'c1',
    title: 'Grade Boca de Lobo',
    img: LOCAL_PRODUCT_IMAGES['c1'] || 'https://source.unsplash.com/800x600/?product,tool',
    sizes: [
      { name: 'Personalizado', price: 0.00 }
    ]
  }
];
/* =========================
   Estado do carrinho e helpers
   ========================= */
const STORAGE_KEY = 'jfg_cart_v1';
let cart = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');

function saveCart(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(cart)); updateCartUI(); }

function addToCart(productId, sizeName, price, qty=1){
  const key = `${productId}__${sizeName}`;
  const existing = cart.find(i => i.key === key);
  if(existing){ existing.qty += qty; existing.price = price; }
  else{
    const prod = products.find(p => p.id === productId) || {title:'Produto', img:''};
    cart.push({ key, id: productId, title: prod.title, size: sizeName, price: price, qty: qty, img: prod.img });
  }
  saveCart();
}

function removeFromCart(key){
  cart = cart.filter(i => i.key !== key);
  saveCart();
}

function changeQty(key, delta){
  const it = cart.find(i => i.key === key);
  if(!it) return;
  it.qty = Math.max(0, it.qty + delta);
  if(it.qty === 0) removeFromCart(key);
  saveCart();
}

function cartTotals(){
  const total = cart.reduce((s,i)=>s + (i.price * i.qty), 0);
  const items = cart.reduce((s,i)=>s + i.qty, 0);
  return { total, items };
}

function formatBRL(v){ return v.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }); }

/* =========================
   RENDERIZAÇÃO DAS PÁGINAS
   ========================= */
const app = document.getElementById('app');

function renderHome(){
  document.title = 'Home — Loja de Ferragens';
  app.innerHTML = `
    <section class="hero">
      <img src="hero.gif" alt="perfil" onerror="this.src='https://source.unsplash.com/400x400/?workshop,person'">
      <h1 style="font-size:28px;margin:6px 0 0">Bem-vindo à nossa loja</h1>
      <p class="small" style="max-width:760px;margin:8px 0 0">Grapas e Mão Francesas — qualidade, rapidez e preços que cabem no bolso. Promoções especiais para clientes VIPs.</p>
      <div class="cta-group" style="margin-top:14px">
        <button class="btn btn-outline" iSer VIPdestaques">Ser VIP</button>
        <button class="btn btn-primary" id="enter-loja">Acessar a loja</button>
      </div>
    </section>

    <section style="margin-top:18px">
      <h3>Destaques</h3>
      <div class="grid" id="featuredGrid"></div>
    </section>
<section style="background: linear-gradient(90deg, #F97316, #FB923C); border-radius: 12px; padding: 36px 20px; color: #fff; text-align: center; margin: 40px 0;">
  <h2 style="font-size: 28px; font-weight: 700; margin-bottom: 12px;">
    Aproveite Nossas Ofertas Exclusivas!
  </h2>
  <p style="font-size: 16px; margin-bottom: 20px;">
    Produtos de qualidade direta da fábrica com preços imperdíveis.
  </p>
  <div style="display: flex; justify-content: center; gap: 12px; flex-wrap: wrap;">
    <button style="padding: 10px 16px; border-radius: 12px; background: #fff; color: #F97316; font-weight: 700; border: none; cursor: pointer;">Ver Produtos</button>
    <button style="padding: 10px 16px; border-radius: 12px; background: transparent; color: #fff; font-weight: 700; border: 2px solid #fff; cursor: pointer;">Saiba Mais</button>
  </div>
</section>


    <section style="padding:40px 20px; max-width:800px; margin:0 auto;">
  <h2 style="font-size:28px; font-weight:700; text-align:center; margin-bottom:24px;">
    Perguntas Frequentes
  </h2>

  <div style="margin-bottom:16px; border-bottom:1px solid #e6e6e6; padding-bottom:12px;">
    <button onclick="toggleFAQ(0)" style="width:100%; text-align:left; background:none; border:none; font-size:18px; font-weight:600; cursor:pointer; color:#F97316;">
      Como faço para comprar?
    </button>
    <div id="faq-answer-0" style="display:none; margin-top:8px; font-size:16px; color:#333;">
      Basta escolher o produto, selecionar o tamanho/quantidade e clicar em 'Adicionar ao Carrinho'.
    </div>
  </div>

  <div style="margin-bottom:16px; border-bottom:1px solid #e6e6e6; padding-bottom:12px;">
    <button onclick="toggleFAQ(1)" style="width:100%; text-align:left; background:none; border:none; font-size:18px; font-weight:600; cursor:pointer; color:#F97316;">
      Quais formas de pagamento vocês aceitam?
    </button>
    <div id="faq-answer-1" style="display:none; margin-top:8px; font-size:16px; color:#333;">
      Aceitamos Pix, cartão de crédito, boleto e transferência bancária.
    </div>
  </div>

  <div style="margin-bottom:16px; border-bottom:1px solid #e6e6e6; padding-bottom:12px;">
    <button onclick="toggleFAQ(2)" style="width:100%; text-align:left; background:none; border:none; font-size:18px; font-weight:600; cursor:pointer; color:#F97316;">
      Quanto tempo demora a entrega?
    </button>
    <div id="faq-answer-2" style="display:none; margin-top:8px; font-size:16px; color:#333;">
      O prazo de entrega varia de acordo com sua cidade, geralmente de 3 a 7 dias úteis.
    </div>
  </div>

  <div style="margin-bottom:16px; border-bottom:1px solid #e6e6e6; padding-bottom:12px;">
    <button onclick="toggleFAQ(3)" style="width:100%; text-align:left; background:none; border:none; font-size:18px; font-weight:600; cursor:pointer; color:#F97316;">
      Posso trocar ou devolver um produto?
    </button>
    <div id="faq-answer-3" style="display:none; margin-top:8px; font-size:16px; color:#333;">
      Sim, você tem até 7 dias após o recebimento para solicitar troca ou devolução.
    </div>
  </div>
</section>
  `;
  // popular destaques (3 primeiros)
  const fg = document.getElementById('featuredGrid');
  fg.innerHTML = '';
  products.slice(0,3).forEach(p=>{
    const card = document.createElement('div'); card.className = 'card';
    card.innerHTML = `
      <img src="${p.img}" alt="${escapeHtml(p.title)}" onerror="this.src='https://source.unsplash.com/800x600/?hardware'">
      <div style="font-weight:700;margin-top:8px">${escapeHtml(p.title)}</div>
      <div class="price">${formatBRL(p.sizes[0].price)}</div>
      <div class="actions">
        <button class="btn btn-outline" data-open="${p.id}">Detalhes</button>
        <button class="btn btn-primary" data-add="${p.id}" data-size="${p.sizes[0].name}" data-price="${p.sizes[0].price}">Adicionar</button>
      </div>
    `;
    fg.appendChild(card);
  });

  document.getElementById('goLoja').addEventListener('click', ()=>navigateTo('/loja'));
  document.getElementById('goSobre').addEventListener('click', ()=>navigateTo('/sobre'));
}

function renderLoja(){
  document.title = 'Loja — Loja de Ferragens';
  app.innerHTML = `
    <section>
      <h2>Loja</h2>
      
      <div class="grid" id="productsGrid"></div>
    </section>
  `;
  const grid = document.getElementById('productsGrid');
  grid.innerHTML = '';
  products.forEach(p=>{
    const el = document.createElement('div'); el.className='card';
    el.innerHTML = `
      <img src="${p.img}" alt="${escapeHtml(p.title)}" onerror="this.src='https://source.unsplash.com/800x600/?tools'">
      <div style="font-weight:700;margin-top:8px">${escapeHtml(p.title)}</div>
      <div class="small muted">A partir de ${formatBRL(p.sizes[0].price)}</div>
      <div class="price">${formatBRL(p.sizes[0].price)}</div>
      <div class="actions">
        <button class="btn btn-outline" data-open="${p.id}">Ver</button>
        <button class="btn btn-primary" data-add="${p.id}" data-size="${p.sizes[0].name}" data-price="${p.sizes[0].price}">Adicionar</button>
      </div>
    `;
    grid.appendChild(el);
  });
}

function renderBlog(){
  document.title = 'Blog — Loja de Ferragens';
  app.innerHTML = `
    <section>
      <h2>Blog</h2>
      <div id="posts" style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px">
      </div>
      <div style="text-align:center;margin-top:12px"><button id="loadMore" class="btn btn-outline">Ver mais</button></div>
    </section>
  `;
  const postsEl = document.getElementById('posts');
  const posts = [
    {title: 'Como escolher buchas para cada parede', excerpt:'Dicas práticas para escolher a bucha certa.'},
    {title: 'Instalando suporte de TV com segurança', excerpt:'Passo a passo para uma instalação segura.'},
    {title: 'Grapas: tipos e aplicações', excerpt:'Entenda os tipos e onde cada uma se aplica.'},
    {title: 'Economizando em obras: 5 dicas', excerpt:'Como reduzir desperdício e custos.'},
    {title: 'Manutenção de ferramentas', excerpt:'Cuidados para aumentar a vida útil.'},
    {title: 'Novidades em fixação', excerpt:'Tendências e novos produtos.'}
  ];
  let shown = 3;
  function draw(){
    postsEl.innerHTML = '';
    posts.slice(0,shown).forEach(p=>{
      const d = document.createElement('div');
      d.style.background = '#fff'; d.style.padding = '14px'; d.style.borderRadius='12px';
      d.innerHTML = `<h4>${escapeHtml(p.title)}</h4><p class="small muted">${escapeHtml(p.excerpt)}</p><button class="btn btn-outline read" style="margin-top:10px">Ler mais</button>`;
      postsEl.appendChild(d);
    });
  }
  draw();
  document.getElementById('loadMore').addEventListener('click', ()=>{
    shown = Math.min(posts.length, shown + 3);
    draw();
  });
}

function renderSobre(){
  document.title = 'Sobre — Loja de Ferragens';
  app.innerHTML = `
    <section>
      <h2>Sobre nós</h2>
      <div style="background:#fff;padding:16px;border-radius:12px;max-width:900px">
        <p>A JFG Metais fabrica e distribui suportes de metal e materiais de fixação com foco em qualidade e atendimento personalizado.</p>
        <p class="muted">Slogan: Qualidade Garantida</p>
      </div>
    </section>
  `;
}

function renderTrabalhe(){
  document.title = 'Trabalhe Conosco — Loja de Ferragens';
  app.innerHTML = `
    <section>
      <h2>Trabalhe Conosco</h2>
      <div style="background:#fff;padding:16px;border-radius:12px;max-width:900px">
        <p>Envie seu currículo e entraremos em contato.</p>
        <form id="cvForm">
          <label>Nome completo</label><br>
          <input type="text" id="nome" placeholder="Seu nome" required style="width:100%;margin-bottom:8px">
          <label>E-mail</label><br>
          <input type="text" id="email" placeholder="email@exemplo.com" style="width:100%;margin-bottom:8px">
          <label>Anexar currículo (PDF)</label><br>
          <input type="file" id="cvFile" accept=".pdf,.doc,.docx" style="width:100%;margin-bottom:8px">
          <div id="cvName" class="small muted" style="margin-bottom:8px"></div>
          <div style="display:flex;gap:8px">
            <button type="submit" class="btn btn-primary">Enviar</button>
            <button type="button" id="clearCv" class="btn btn-outline">Limpar</button>
          </div>
        </form>
      </div>
    </section>
  `;

  const cvFile = document.getElementById('cvFile');
  const cvName = document.getElementById('cvName');
  cvFile.addEventListener('change', ()=> {
    if(cvFile.files.length) cvName.textContent = `Arquivo selecionado: ${cvFile.files[0].name}`;
    else cvName.textContent = '';
  });
  document.getElementById('clearCv').addEventListener('click', ()=> {
    cvFile.value = ''; cvName.textContent = '';
  });
  document.getElementById('cvForm').addEventListener('submit', (e)=>{
    e.preventDefault();
    // Simples feedback local — se quiser integrar EmailJS, ative e configure
    const nome = document.getElementById('nome').value;
    alert(`Obrigado ${nome}! Recebemos seu currículo (simulado). Entraremos em contato.`);
    // reset
    e.target.reset(); cvName.textContent = '';
  });
}

/* =========================
   Modal de produto
   ========================= */
function openProductModal(productId){
  const p = products.find(x=>x.id===productId);
  if(!p) return;
  const overlays = document.getElementById('overlays');
  const modalId = 'prodModal';
  const modalHtml = document.createElement('div');
  modalHtml.className = 'overlay';
  modalHtml.innerHTML = `
    <div class="modal" role="dialog" aria-modal="true" id="${modalId}">
      <img src="${p.img}" alt="${escapeHtml(p.title)}" onerror="this.src='https://source.unsplash.com/800x600/?tools'">
      <div style="flex:1;display:flex;flex-direction:column">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <h3>${escapeHtml(p.title)}</h3>
            <div class="muted small">Escolha o tamanho / variação</div>
          </div>
          <div><button id="closeModal" class="remove-ghost">Ⓧ</button></div>
        </div>

        <div style="margin-top:12px">
          <label for="sizeSelect">Tamanho / Variedade</label><br>
          <select id="sizeSelect" style="width:100%;margin-top:6px">
            ${p.sizes.map(s=>`<option value="${escapeAttr(s.name)}" data-price="${s.price}">${escapeHtml(s.name)} — ${formatBRL(s.price)}</option>`).join('')}
          </select>
        </div>

        <div style="margin-top:12px;display:flex;gap:10px;align-items:center">
          <div>
            <div class="qty-control">
              <button id="decQty" class="qty-btn">-</button>
              <div id="qtyNumber" class="qty-number">1</div>
              <button id="incQty" class="qty-btn">+</button>
            </div>
          </div>
          <div style="margin-left:auto;font-weight:700" id="modalTotal">${formatBRL(p.sizes[0].price)}</div>
        </div>

        <div style="margin-top:auto;display:flex;gap:8px">
          <button id="modalAdd" class="btn btn-primary">Adicionar ao carrinho</button>
          <button id="modalWhatsapp" class="btn btn-outline">Comprar via WhatsApp</button>
        </div>
      </div>
    </div>
  `;
  overlays.appendChild(modalHtml);

  let qty = 1;
  const sizeSelect = modalHtml.querySelector('#sizeSelect');
  const qtyNumber = modalHtml.querySelector('#qtyNumber');
  const incQty = modalHtml.querySelector('#incQty');
  const decQty = modalHtml.querySelector('#decQty');
  const modalTotal = modalHtml.querySelector('#modalTotal');

  function updateTotal(){
    const price = parseFloat(sizeSelect.selectedOptions[0].dataset.price);
    modalTotal.textContent = formatBRL(price * qty);
  }

  incQty.addEventListener('click', ()=>{ qty++; qtyNumber.textContent = qty; updateTotal(); });
  decQty.addEventListener('click', ()=>{ if(qty>1) qty--; qtyNumber.textContent = qty; updateTotal(); });

  sizeSelect.addEventListener('change', updateTotal);

  modalHtml.querySelector('#closeModal').addEventListener('click', ()=>{ overlays.removeChild(modalHtml); });

  modalHtml.addEventListener('click', (e)=>{ if(e.target === modalHtml) overlays.removeChild(modalHtml); });

  modalHtml.querySelector('#modalAdd').addEventListener('click', ()=>{
    const size = sizeSelect.value;
    const price = parseFloat(sizeSelect.selectedOptions[0].dataset.price);
    addToCart(p.id, size, price, qty);
    overlays.removeChild(modalHtml);
  });

  modalHtml.querySelector('#modalWhatsapp').addEventListener('click', ()=>{
    const size = sizeSelect.value;
    const price = parseFloat(sizeSelect.selectedOptions[0].dataset.price);
    const msg = `*Pedido rápido*%0AProduto: ${encodeURIComponent(p.title)}%0ATamanho: ${encodeURIComponent(size)}%0AQuantidade: ${qty}%0AValor unitário: ${encodeURIComponent(formatBRL(price))}%0ATotal: ${encodeURIComponent(formatBRL(price*qty))}`;
    window.open(`https://wa.me/${WA_NUMBER}?text=${msg}`, '_blank');
  });
}

/* =========================
   Carrinho UI
   ========================= */
let cartPanelEl = null;
function updateCartUI(){
  const { total, items } = cartTotals();
  document.getElementById('cart-count').textContent = items;
  document.getElementById('cart-summary').textContent = `${items} item${items !== 1 ? 's' : ''} — ${formatBRL(total)}`;

  // if panel open, re-render
  if(cartPanelEl){
    renderCartPanel();
  }
}

function renderCartPanel(){
  if(!cartPanelEl) return;
  const container = cartPanelEl;
  container.innerHTML = '';
  if(cart.length === 0){
    container.innerHTML = `<div style="text-align:center;padding:20px"><strong>Carrinho vazio</strong><div class="small muted" style="margin-top:8px">Adicione produtos para prosseguir.</div></div>`;
    return;
  }
  cart.forEach(item=>{
    const row = document.createElement('div'); row.className='cart-item';
    row.innerHTML = `
      <img src="${item.img}" onerror="this.src='https://source.unsplash.com/200x200/?hardware'">
      <div style="flex:1">
        <div style="font-weight:700">${escapeHtml(item.title)}</div>
        <div class="small muted">${escapeHtml(item.size)}</div>
        <div style="margin-top:8px;display:flex;align-items:center;gap:8px">
          <button class="qty-btn small-dec" data-key="${item.key}">-</button>
          <div class="qty-number">${item.qty}</div>
          <button class="qty-btn small-inc" data-key="${item.key}">+</button>
          <div style="margin-left:auto;font-weight:700">${formatBRL(item.price * item.qty)}</div>
        </div>
      </div>
      <div>
        <button class="remove-ghost" data-remove="${item.key}">Remover</button>
      </div>
    `;
    container.appendChild(row);
  });

  const totals = document.createElement('div');
  totals.style.marginTop = '12px';
  totals.innerHTML = `
    <div style="display:flex;align-items:center;justify-content:space-between;font-weight:700">
      <div>Total</div>
      <div>${formatBRL(cartTotals().total)}</div>
    </div>
    <div class="cart-actions">
      <button id="checkoutWa" class="btn btn-primary">Finalizar pelo WhatsApp</button>
      <button id="clearCart" class="btn btn-outline">Limpar</button>
    </div>
  `;
  container.appendChild(totals);

  // attach events
  container.querySelectorAll('[data-remove]').forEach(b=> b.addEventListener('click', (e)=>{
    removeFromCart(e.currentTarget.dataset.remove);
  }));
  container.querySelectorAll('.small-inc').forEach(b=> b.addEventListener('click', (e)=> changeQty(e.currentTarget.dataset.key, 1)));
  container.querySelectorAll('.small-dec').forEach(b=> b.addEventListener('click', (e)=> changeQty(e.currentTarget.dataset.key, -1)));

  document.getElementById('checkoutWa').addEventListener('click', ()=>{
    const lines = cart.map(i => `${i.qty}x ${i.title} (${i.size}) - ${formatBRL(i.price)} = ${formatBRL(i.price * i.qty)}`);
    const totalStr = formatBRL(cartTotals().total);
    const msg = encodeURIComponent(`Olá, tenho interesse nos itens:%0A${lines.join('%0A')}%0A%0ATotal: ${totalStr}`);
    window.open(`https://wa.me/${WA_NUMBER}?text=${msg}`, '_blank');
  });

  document.getElementById('clearCart').addEventListener('click', ()=> {
    if(confirm('Limpar todo o carrinho?')){ cart = []; saveCart(); }
  });
}

/* =========================
   Navegação (hash)
   ========================= */
function navigateTo(route){
  location.hash = route;
}

function routeChanged(){
  const route = location.hash.replace('#','') || '/';
  // close mobile nav if open
  closeMobileNav();

  // highlight nav links
  document.querySelectorAll('.nav-link').forEach(a=>{
    if(a.dataset.route === route) a.classList.add('active'); else a.classList.remove('active');
  });

  switch(route){
    case '/loja': renderLoja(); break;
    case '/blog': renderBlog(); break;
    case '/sobre': renderSobre(); break;
    case '/trabalhe': renderTrabalhe(); break;
    default: renderHome();
  }
}

/* =========================
   Escuta global e inicialização
   ========================= */
window.addEventListener('hashchange', routeChanged);

document.addEventListener('click', (e)=>{
  // abrir modal detalhes
  const openBtn = e.target.closest('[data-open]');
  if(openBtn){
    openProductModal(openBtn.dataset.open);
    return;
  }
  // add quick (com size default)
  const addBtn = e.target.closest('[data-add]');
  if(addBtn){
    const pid = addBtn.dataset.add;
    const size = addBtn.dataset.size || ( (products.find(p=>p.id===pid) || {}).sizes || [{}] )[0].name;
    const price = parseFloat(addBtn.dataset.price) || ((products.find(p=>p.id===pid) || {}).sizes || [{}])[0].price || 0;
    addToCart(pid, size, price, 1);
    // feedback rápido
    const old = addBtn.innerHTML;
    addBtn.innerHTML = 'Adicionado ✓';
    setTimeout(()=> addBtn.innerHTML = old, 900);
    return;
  }
});

// hamburger logic
const hamburger = document.getElementById('hamburger');
const mobileNav = document.getElementById('mobileNav');

function openMobileNav(){ mobileNav.classList.add('open'); mobileNav.setAttribute('aria-hidden','false'); hamburger.classList.add('active'); }
function closeMobileNav(){ mobileNav.classList.remove('open'); mobileNav.setAttribute('aria-hidden','true'); hamburger.classList.remove('active'); }

hamburger.addEventListener('click', (e)=>{
  if(mobileNav.classList.contains('open')) closeMobileNav(); else openMobileNav();
});

// close mobile nav when clicking a link + navigate
document.querySelectorAll('.mobile-nav .nav-link').forEach(a=>{
  a.addEventListener('click', (e)=>{
    e.preventDefault();
    const route = a.dataset.route || '/';
    navigateTo(route);
    closeMobileNav(); // FECHA AUTOMATICAMENTE (pedido)
  });
});
// also desktop links (prevent default for SPA experience)
document.querySelectorAll('#desktopNav .nav-link').forEach(a=>{
  a.addEventListener('click', (e)=>{ e.preventDefault(); navigateTo(a.dataset.route || '/'); });
});

// cart button
const cartBtn = document.getElementById('cart-btn');
let panelOpen = false;

cartBtn.addEventListener('click', ()=>{
  if(panelOpen){ closeCartPanel(); return; }
  openCartPanel();
});

function openCartPanel(){
  if(panelOpen) return;
  panelOpen = true;
  cartPanelEl = document.createElement('div'); cartPanelEl.className = 'cart-panel';
  document.body.appendChild(cartPanelEl);
  renderCartPanel();
  updateCartUI();

  // click outside to close
  setTimeout(()=> {
    document.addEventListener('click', panelOuterClick);
  }, 30);
}

function panelOuterClick(e){
  if(!cartPanelEl) return;
  if(e.target.closest('.cart-panel') || e.target.closest('#cart-btn')) return;
  closeCartPanel();
}

function closeCartPanel(){
  panelOpen = false;
  if(cartPanelEl){ document.body.removeChild(cartPanelEl); cartPanelEl = null; }
  document.removeEventListener('click', panelOuterClick);
}

/* =========================
   Inicialização final
   ========================= */
document.getElementById('year').textContent = new Date().getFullYear();
updateCartUI();
routeChanged(); // primeira rota

/* =========================
   Utilitários
   ========================= */
function escapeHtml(str=''){ return String(str).replace(/[&<>"']/g, s=> ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[s])); }
function escapeAttr(str=''){ return String(str).replace(/"/g, '&quot;'); }
function toggleFAQ(index) {
  const element = document.getElementById(`faq-answer-${index}`);
  element.style.display = element.style.display === "block" ? "none" : "block";
}
</script>
</body>
</html>
